import{u as g}from"./B1HfQ2J4.js";import{a as b}from"./CCb-kr4I.js";import{i as h,g as y,v as l,x as o,J as n,K as w,L as P,z as r,A as s,y as i,t as c,B as p}from"./S0V1hgl_.js";const $={class:"container mx-auto px-4"},q={key:0,class:"bg-white rounded-lg shadow-md p-6"},B={class:"quantity-controls"},N={class:"mt-6 flex justify-between items-center"},V={class:"mt-6 flex justify-between items-center"},L={class:"text-xl font-bold"},T={key:1,class:"text-center py-12"},j="http://localhost:8080/api",Q={__name:"cart",setup(A){const{cartItems:d,cartTotal:_,increaseQuantity:f,decreaseQuantity:x,clearCart:m}=g();h(()=>d.value.reduce((e,t)=>e+t.product.price*t.quantity,0));const k=async()=>{try{await b.post(`${j}/orden`,{id_cliente:1,fecha:new Date,total:_.value,detalles:d.value.map(e=>({idProducto:e.id,cantidad:e.quantity,precio_unitario:e.price}))}),m(),alert("Orden enviada exitosamente.")}catch(e){console.error("Error al enviar la orden:",e)}};return(e,t)=>{const v=y("v-icon"),u=y("v-btn");return c(),l("div",$,[t[5]||(t[5]=o("h1",{class:"text-3xl font-bold mb-8"},"Carrito de compras",-1)),n(d).length>0?(c(),l("div",q,[(c(!0),l(w,null,P(n(d),a=>(c(),l("div",{key:a.idProducto,class:"cart-item"},[o("p",null,i(a.nombre)+" - $"+i(a.precio),1),o("div",B,[r(u,{icon:"",onClick:C=>n(x)(a.idProducto)},{default:s(()=>[r(v,null,{default:s(()=>t[0]||(t[0]=[p("mdi-minus")])),_:1})]),_:2},1032,["onClick"]),o("span",null,i(a.quantity),1),r(u,{icon:"",onClick:C=>n(f)(a.idProducto)},{default:s(()=>[r(v,null,{default:s(()=>t[1]||(t[1]=[p("mdi-plus")])),_:1})]),_:2},1032,["onClick"])]),o("p",null,"Subtotal: $"+i(a.precio*a.quantity),1)]))),128)),o("div",N,[r(u,{color:"primary",onClick:n(m)},{default:s(()=>t[2]||(t[2]=[p("Vaciar carrito")])),_:1},8,["onClick"])]),o("div",V,[o("span",L,"Total: $"+i(n(_)),1),r(u,{color:"primary",onClick:k},{default:s(()=>t[3]||(t[3]=[p("Pagar")])),_:1})])])):(c(),l("div",T,t[4]||(t[4]=[o("p",{class:"text-xl text-gray-600"},"No has agregado ning√∫n producto en el carrito",-1)])))])}}};export{Q as default};
